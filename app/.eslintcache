[{"/home/f/codes/bcs/farmer/app/src/index.js":"1","/home/f/codes/bcs/farmer/app/src/App.js":"2","/home/f/codes/bcs/farmer/app/src/balances.js":"3","/home/f/codes/bcs/farmer/app/src/block.js":"4","/home/f/codes/bcs/farmer/app/src/baseComponet.js":"5"},{"size":221,"mtime":1606717672688,"results":"6","hashOfConfig":"7"},{"size":1024,"mtime":1606704417451,"results":"8","hashOfConfig":"7"},{"size":15316,"mtime":1607503733214,"results":"9","hashOfConfig":"7"},{"size":1161,"mtime":1607392440572,"results":"10","hashOfConfig":"7"},{"size":5248,"mtime":1607502389219,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"y35711",{"filePath":"14","messages":"15","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"16"},{"filePath":"17","messages":"18","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"22","messages":"23","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/home/f/codes/bcs/farmer/app/src/index.js",[],"/home/f/codes/bcs/farmer/app/src/App.js",["24","25","26","27"],"import './App.css';\nimport { Component } from 'react';\nimport Block from './block';\nimport Web3 from \"web3\";\n\nimport {SiderDemo, ProcessStatus, TreeList, ShowTree, TransactTrc} from './balances'\n\nclass App extends Component {\n\n  componentWillMount() {\n    if (window.ethereum) {\n      // use MetaMask's provider\n      Block.web3 = new Web3(window.ethereum);\n      window.ethereum.enable(); // get permission to access accounts\n    } else {\n      console.warn(\n        \"No web3 detected. Falling back to http://127.0.0.1:8545. You should remove this fallback when you deploy live\",\n      );\n      // fallback - use your fallback strategy (local node / hosted node + in-dapp id mgmt / fail)\n      Block.web3 = new Web3(\n        new Web3.providers.HttpProvider(\"http://127.0.0.1:8545\"),\n        // new Web3.providers.HttpProvider(\"http://192.168.8.208:8545\"),\n      );\n    }\n    Block.start();\n    console.log('enter App componentWillMount');\n  }\n\n  render() {\n      return (\n        <SiderDemo />)\n  }\n\n}\n\nexport default App;\n","/home/f/codes/bcs/farmer/app/src/balances.js",["28","29","30","31","32","33"],"import React from 'react';\nimport Block from './block';\nimport BaseComponent from './baseComponet';\nimport { List, message, Avatar, Spin, Steps } from 'antd';\nimport InfiniteScroll from 'react-infinite-scroller';\n\nimport { Layout, Menu, Button, Card } from 'antd';\nimport {\n  UserOutlined,\n  PieChartOutlined,\n  UploadOutlined,\n  BlockOutlined,\n  ReconciliationFilled,\n} from '@ant-design/icons';\n\nimport { Form, Input, Select } from 'antd';\n\nconst { Header, Sider} = Layout;\nconst { Step } = Steps;\n\nconst { Option } = Select;\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16,\n  },\n};\n\n\nclass Demo extends BaseComponent {\n  constructor(props) {\n    super(props);\n    this.onFinish = this.onFinish.bind(this);\n    this.state = {\n      balanceList:[],\n      status:\"\"\n    }\n  }\n\n\n  onFinish = (values) => {\n    this.transfer(values.address, values.number);\n    this.refreshBalance();\n  };\n\n  componentDidMount() {\n    this.refreshBalance();\n  }\n\n  render() {\n    return (\n      <div>\n      <Form {...layout} name=\"control-ref\" onFinish={this.onFinish} style={{margin:70}}>\n        <Form.Item\n          name=\"address\"\n          label=\"区块链地址\"\n          rules={[\n            {\n              required: true,\n            },\n          ]} style={{width:\"90%\"}}\n        >\n          <Input placeholder=\"eg.0xc1C24A14cD93A4c96678e2d85F17a26Efb12D37e\"/>\n        </Form.Item>\n        <Form.Item\n          name=\"number\"\n          label=\"果树编号\"\n          rules={[\n            {\n              required: true,\n            },\n          ]}\n        >\n          <Select\n            placeholder=\"选择你拥有的果树编号\"\n            allowClear\n            style={{width:\"80%\"}}\n          > \n            {this.state.balanceList.map(item => (<Option value={item} key={item}>果树编号: {item}</Option>))}\n          </Select>\n        </Form.Item>\n        <Form.Item {...tailLayout}>\n          <Button type=\"primary\" htmlType=\"submit\">\n            转让\n          </Button>\n        </Form.Item>\n      </Form>\n      </div>\n    );\n  }\n}\n\n\nclass MyCard extends BaseComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n    this.refInput = React.createRef();\n  }\n\n  changeAddr = (e) => {\n    this.refInput.current.value = e.target.value;\n  }\n\n  addAddr = () => {\n    let addr = this.refInput.current.value;\n    console.log(\"add addr\", this.state.number, addr);\n    this.recordAddr(this.state.number, addr)\n  }\n\n  componentDidMount() {\n    this.getBidInfo();\n    this.refreshProcess();\n  }\n\n  render() {\n    return (\n      <Card title=\"我的竞拍\">\n        <Card type=\"inner\" title=\"我的地址\" >\n          <strong>{this.state.account}</strong>\n        </Card>\n        <Card type=\"inner\" title=\"我的出价\" >\n          <strong>{this.state.price / 10**18} ETH</strong>\n        </Card>\n          <Card\n            style={{ marginTop: 16 }}\n            type=\"inner\"\n            title=\"果树编号\"\n          >\n            {this.state.number === '0'?\"无\":this.state.number}\n          </Card>\n            <Card\n              style={{ marginTop: 16 }}\n              type=\"inner\"\n              title=\"邮寄地址(地址确认期可填写)\"\n            >\n              <input style={{marginRight:\"10px\"}} type=\"text\"　placeholder={this.state.host}　ref={this.refInput} onChange={this.changeAddr.bind(this)}></input>\n              <Button type=\"dashed\" size=\"middle\" onClick={this.addAddr.bind(this)}>确定</Button>\n\n            </Card>\n            <Card\n              style={{ marginTop: 16 }}\n                type=\"inner\"\n                title=\"收益(结算期可提取)\"\n            >\n              <Button type=\"primary\" size=\"middle\" onClick={()=>{}}>提取收益</Button>\n            </Card>\n    </Card>\n    );\n  }\n}\n\nclass InfiniteListExample extends BaseComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tcs:[],\n      hightests:[],\n      addrs:[],\n      data:[],\n      status:4,\n      loading: false,\n      hasMore: true,\n    };\n    this.refInput = React.createRef();\n  }\n  \n  componentDidMount() {\n    this.refreshProcess()\n    this.getTcs();\n    this.getAddrs();\n    this.getHighest();\n    }\n\n  bidTrc = (number) => {\n    console.log(\"bidTrc\", this.refInput.current.value);\n    console.log(\"bidTrc\", number);\n    this.postBid(parseInt(number), parseFloat(this.refInput.current.value))\n    this.getTcs();\n  }\n\n  changPrice = (e) => {\n    console.log(e.target.value);\n    this.refInput.current.value = e.target.value;\n  }\n\n  handleInfiniteOnLoad = () => {\n    let { tcs } = this.state;\n    this.setState({\n      loading: true,\n    });\n    if (tcs.length > 15) {\n      message.warning('已经到底了');\n      this.setState({\n        hasMore: false,\n        loading: false,\n      });\n      return;\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"demo-infinite-container\">\n        <InfiniteScroll\n          initialLoad={false}\n          pageStart={0}\n          loadMore={this.handleInfiniteOnLoad}\n          hasMore={!this.state.loading && this.state.hasMore}\n          useWindow={false}\n        >\n          <List\n            dataSource={this.state.tcs}\n            renderItem={(item, index) => (\n              <List.Item key={index}>\n                <List.Item.Meta\n                  avatar={\n                    <Avatar src=\"logo192.png\" />\n                  }\n                  title={<a>{\"果树编号：\"+item}</a>}\n                />\n                <div>\n                  <p　className=\"ant-list-item-p\"><strong>当前最高价</strong>: {this.state.hightests[index] / 10**18 + \" ETH\"}</p>\n                  <p  className=\"ant-list-item-p\"><strong>最高者地址</strong>: {this.state.addrs[index]}</p>\n                  <input type=\"text\" ref={this.refInput} className=\"ant-list-item-p\" \n                    placeholder=\"出价(eth)\" style={{width:\"5em\"}} defaultValue=\"0.1\" onChange={this.changPrice.bind(this)} name=\"price\"/>\n                  {this.state.status === 0? <Button type=\"dashed\" size=\"middle\" onClick={this.bidTrc.bind(this, item)}>竞拍</Button>:\n                    <Button type=\"dashed\" size=\"middle\" disabled>已结束</Button>\n                  }\n                  </div>\n              </List.Item>\n            )}\n          >\n            {this.state.loading && this.state.hasMore && (\n              <div className=\"demo-loading-container\">\n                <Spin />\n              </div>\n            )}\n          </List>\n        </InfiniteScroll>\n      </div>\n    );\n  }\n}\n\nclass MySteps extends BaseComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status:0, \n      processMap:[\"自由竞拍期\", \"地址确认期\", \"货物交割期\", \"确认申诉期\", \"结算期\"]\n    }\n  }\n\n\n  componentDidMount() {\n    this.refreshProcess();\n  }\n  render() {\n    return (\n    <Steps current={parseInt(this.state.status)}>\n      {this.state.processMap.map(item=><Step title={item} key={item}/>)}\n    </Steps>)\n  }\n}\n\nclass WithdrawOrConfirm extends BaseComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status:1, \n      isVote:4, \n    }\n  }\n  componentDidMount() {\n    this.getVote();\n  }\n\n  onClickItem　= (isWithdraw) => {\n    console.log(\"WithdrawOrConfirm\", this.state);\n    if(this.state.status != 3) {\n      message.warning(\"当前不是申诉期！\");\n    }\n    else if(this.state.isVote === 3) {\n      message.warning(\"您没有竞拍无法申诉或者确认收货\");\n    } else if(this.state.isVote === 4) {\n      message.warning(\"系统暂时无法获取您的竞拍信息！\");\n    } else{\n      this.vote(isWithdraw);\n    }\n  }\n  render() {\n    return (\n      <div>\n        <p　style={{width:\"50%\", marginLeft:\"22%\", marginTop:\"10%\"}}>确认申诉期,竞拍成功的您可以选择申诉或者确认收货,　如果选择申诉，并且大多数人也选择申诉时，farmer将得到无法获得你所竞拍果树所花费的奖励。\n          选择确认收货，并且大多数人也选择确认收货时，farmer 能提取竞拍奖励，您也将获取竞拍花费的10%的返利。\n        </p>\n      <Button type=\"primary\" htmlType=\"submit\" style={{marginLeft:\"30%\", marginTop:\"50px\"}} onClick={this.onClickItem.bind(this, false)}>\n      申诉投票\n    </Button>\n    <Button type=\"primary\" htmlType=\"submit\" style={{marginLeft:\"10%\"}} onClick={this.onClickItem.bind(this, true)} >\n          确认收货\n    </Button>\n    </div>\n    )\n  }\n}\nclass SiderDemo extends React.Component {\n  state = {\n    collapsed: false,\n    current:{key:1}\n  };\n\n  toggle = () => {\n    this.setState({\n      collapsed: !this.state.collapsed,\n    });\n  };\n\n  onClickItem = (index) => {\n    console.log(\"click item\", index);\n    this.setState({current:{key:index}});\n  }\n\n  render() {\n    return (\n      <Layout>\n        <Sider trigger={null} collapsible collapsed={this.state.collapsed}>\n          <div className=\"logo\"><h1>果树Token化研究应用</h1>\n          </div>\n          <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={['1']}>\n            <Menu.Item key=\"1\" icon={<UserOutlined />} onClick={this.onClickItem.bind(this, 1)}>\n              我的竞拍\n            </Menu.Item>\n            <Menu.Item key=\"2\" icon={<PieChartOutlined/>} onClick={this.onClickItem.bind(this, 2)}>\n              果树列表\n            </Menu.Item>\n            <Menu.Item key=\"3\" icon={<UploadOutlined />} onClick={this.onClickItem.bind(this, 3)}>\n              果树转让\n            </Menu.Item>\n            <Menu.Item key=\"４\" icon={<UploadOutlined />} onClick={this.onClickItem.bind(this, 4)}>\n              申诉or确认\n            </Menu.Item>\n          </Menu>\n        </Sider>\n        <Layout className=\"site-layout\">\n          <Header className=\"site-layout-background\" style={{ padding: 0 }}>\n            <h1>果树Token化研究应用</h1>\n            <MySteps/>\n          </Header>\n          {\n            (this.state.current.key === 1) && <MyCard/> ||\n            (this.state.current.key === 2 && <InfiniteListExample className=\"site-layout-background\"\n            style={{\n              margin: '24px 16px',\n              padding: 24,\n              minHeight: 280,\n              height: \"100%\",\n            }}></InfiniteListExample> ) || \n            (this.state.current.key === 3 && <Demo/>) ||\n            (this.state.current.key === 4 && <WithdrawOrConfirm/>)\n          }\n        </Layout>\n      </Layout>\n    );\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass ProcessStatus extends BaseComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \"申诉期\"\n    }\n    this.refreshProcess = this.refreshProcess.bind(this);\n  }\n\n  async refreshProcess() {\n    await this.connect();\n    const {getProcess} = Block.meta.methods;\n    var res = await getProcess().call();\n    const processMap = {\"0\":\"自由认领交易期\", \"1\":\"申诉期\", \"2\":\"项目已结算\"};\n    console.log(\"ProcessStatus\", processMap[res]);\n    this.setState({status:processMap[res]});\n  }\n\n  componentDidMount() {\n    this.refreshProcess();\n    console.log('enter ProcessStatus componentWillMount ')\n  }\n\n  render() {\n    return (\n    <div>项目当前进度: <label>{this.state.status}</label></div>\n    );\n  }\n}\n\nclass TreeList extends BaseComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      balanceList: []\n    }\n    this.refreshStatus = this.refreshStatus.bind(this);\n    console.log('enter constructor: ' + this.state.balanceList);\n  }\n\n  async refreshStatus() {\n    await this.connect();\n    const {getStatus} = Block.meta.methods;\n    var balanceList = await getStatus().call();\n    console.log('refreshStatus: '+ balanceList)\n    var newBalanceList = balanceList.map(function(item, index) {return {key:index+1, value:item}});\n    this.setState({balanceList:newBalanceList})\n  }\n  \n  componentDidMount() {\n      this.refreshStatus();\n      console.log('enter TreeList componentWillMount ')\n    }\n\n    render() {\n      return (\n        <div className=\"shopping-list\">\n          <h3>果树列表</h3>\n          <ul id=\"tree\">\n              {this.state.balanceList.map(item => (<li key={item.key}>果树编号: {item.key}</li>))}\n          </ul>\n        </div>\n      );\n    }\n  }\n\n  class ShowTree extends BaseComponent {\n    constructor(props) {\n      super(props);\n      this.state = {\n        balance: 0,\n        balanceList: []\n      }\n      this.refreshBalance = this.refreshBalance.bind(this);\n      console.log('enter constructor: ' + props);\n    }\n\n    async refreshBalance() {\n      await this.connect()\n      const {balanceOf} = Block.meta.methods;\n      const balance = await balanceOf(Block.account).call();\n      this.setState({balance: balance});\n      if (balance !== \"0\") {\n        const { getBalance } = Block.meta.methods;\n        const balanceList = await getBalance(Block.account).call();\n        console.log(balanceList);\n        var balanceListShow = balanceList.filter(item => item!==0);\n        this.setState({balanceList:balanceListShow});\n      }\n    }\n\n    componentDidMount() {\n      this.refreshBalance();\n      console.log('enter ShowTree componentWillMount ')\n    }\n\n    render() {\n      return (\n        <div>        \n          <div>我持有的果树共有：<label className=\"balance\"> {this.state.balance}</label>棵</div>\n          {this.state.balance !== 0 &&\n          <div>我持有的果树编号为: <label><strong className=\"balanceList\"> {this.state.balanceList.toString()}</strong></label></div> }\n        </div>\n        );\n    }\n  }\n\n  class TransactTrc extends BaseComponent {\n    constructor(props) {\n      super(props);\n      this.state = {\n        balance: 0,\n        balanceList: [],\n        status:\"\"\n      }\n      this.sendCoin = this.sendCoin.bind(this);\n      this.refAddr = this.refAddr.bind(this);\n      this.refNum = this.refNum.bind(this);\n      console.log('enter constructor: ' + props);\n    }\n\n    refAddr(node) {\n      this.addrInput = node;\n    }\n\n    refNum(node) {\n      this.numInput = node;\n    }\n\n    async transfer(receiver, amount) {\n      await this.connect();\n      this.setState({status:\"Initiating transaction... (please wait)\"})\n      const { transfer } = Block.meta.methods;\n      const success = await transfer(receiver, amount).send({ from: Block.account });\n      console.log(success);\n      this.setState({status:\"Transaction complete!\"});\n    }\n\n    sendCoin() {\n      const receiver = this.addrInput.value.trim();\n      const amount = this.numInput.value.trim();\n      console.log(receiver, amount);\n      if (!receiver) {\n        alert(\"请输入有效地址!\");\n        return;\n      }\n      if (!amount) {\n        alert(\"请输入有效果树编码!\");\n        return;\n      }\n       this.transfer(receiver, amount);\n    }\n\n    render() {\n      return (\n\n        <div>\n          向地址为:\n          <input type=\"text\" ref={this.refAddr} placeholder=\"e.g. 0x93e66d9baea28c17d9fc393b53e3fbdd76899dae\"/> 的人转让编号为:\n          <input type=\"text\" ref={this.refNum} placeholder=\"e.g. 3\" />\n          的果树\n          <button onClick={this.sendCoin}>确认</button>\n          {this.state.status !== \"\" && <p>{this.state.status}</p>}\n        </div>\n        );\n    }\n  }\nexport  {TreeList, ProcessStatus, ShowTree, TransactTrc, SiderDemo};\n","/home/f/codes/bcs/farmer/app/src/block.js",[],"/home/f/codes/bcs/farmer/app/src/baseComponet.js",["34"],{"ruleId":"35","severity":1,"message":"36","line":6,"column":20,"nodeType":"37","messageId":"38","endLine":6,"endColumn":33},{"ruleId":"35","severity":1,"message":"39","line":6,"column":35,"nodeType":"37","messageId":"38","endLine":6,"endColumn":43},{"ruleId":"35","severity":1,"message":"40","line":6,"column":45,"nodeType":"37","messageId":"38","endLine":6,"endColumn":53},{"ruleId":"35","severity":1,"message":"41","line":6,"column":55,"nodeType":"37","messageId":"38","endLine":6,"endColumn":66},{"ruleId":"35","severity":1,"message":"42","line":12,"column":3,"nodeType":"37","messageId":"38","endLine":12,"endColumn":16},{"ruleId":"35","severity":1,"message":"43","line":13,"column":3,"nodeType":"37","messageId":"38","endLine":13,"endColumn":23},{"ruleId":"44","severity":1,"message":"45","line":229,"column":26,"nodeType":"46","endLine":229,"endColumn":29},{"ruleId":"47","severity":1,"message":"48","line":290,"column":26,"nodeType":"49","messageId":"50","endLine":290,"endColumn":28},{"ruleId":"51","severity":1,"message":"52","line":361,"column":44,"nodeType":"53","messageId":"54","endLine":361,"endColumn":46},{"ruleId":"51","severity":1,"message":"52","line":361,"column":57,"nodeType":"53","messageId":"54","endLine":361,"endColumn":59},{"ruleId":"35","severity":1,"message":"55","line":4,"column":10,"nodeType":"37","messageId":"38","endLine":4,"endColumn":27},"no-unused-vars","'ProcessStatus' is defined but never used.","Identifier","unusedVar","'TreeList' is defined but never used.","'ShowTree' is defined but never used.","'TransactTrc' is defined but never used.","'BlockOutlined' is defined but never used.","'ReconciliationFilled' is defined but never used.","jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","no-mixed-operators","Unexpected mix of '&&' and '||'.","LogicalExpression","unexpectedMixedOperator","'ArrowsAltOutlined' is defined but never used."]